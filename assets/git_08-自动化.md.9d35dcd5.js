import{_ as s,o as n,c as a,b as e,d as l,e as p,a as o,r as c}from"./app.b322fe29.js";const t=JSON.parse('{"title":"自动化打包、部署","description":"","frontmatter":{},"headers":[{"level":2,"title":"vuepress 自动发布","slug":"vuepress-自动发布","link":"#vuepress-自动发布","children":[]}],"relativePath":"git/08-自动化.md","lastUpdated":1663311966000}'),i={name:"git/08-自动化.md"},r=l("h1",{id:"自动化打包、部署",tabindex:"-1"},[p("自动化打包、部署 "),l("a",{class:"header-anchor",href:"#自动化打包、部署","aria-hidden":"true"},"#")],-1),A=o('<h2 id="vuepress-自动发布" tabindex="-1">vuepress 自动发布 <a class="header-anchor" href="#vuepress-自动发布" aria-hidden="true">#</a></h2><blockquote><p>github actions.github/workflows/master.yml:</p></blockquote><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">name: Build  to GitHub Pages</span></span>\n<span class="line"><span style="color:#A6ACCD;">on:</span></span>\n<span class="line"><span style="color:#A6ACCD;">  push:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    branches: [ master ]</span></span>\n<span class="line"><span style="color:#A6ACCD;">  # Allows you to run this workflow manually from the Actions tab</span></span>\n<span class="line"><span style="color:#A6ACCD;">  workflow_dispatch:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    </span></span>\n<span class="line"><span style="color:#A6ACCD;">jobs:</span></span>\n<span class="line"><span style="color:#A6ACCD;">  build:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    runs-on: ubuntu-latest</span></span>\n<span class="line"><span style="color:#A6ACCD;">    steps:</span></span>\n<span class="line"><span style="color:#A6ACCD;">    - uses: actions/checkout@v2</span></span>\n<span class="line"><span style="color:#A6ACCD;">    - name: Use Node.js</span></span>\n<span class="line"><span style="color:#A6ACCD;">      uses: actions/setup-node@v1</span></span>\n<span class="line"><span style="color:#A6ACCD;">      with:</span></span>\n<span class="line"><span style="color:#A6ACCD;">        node-version: &#39;14.x&#39;</span></span>\n<span class="line"><span style="color:#A6ACCD;"></span></span>\n<span class="line"><span style="color:#A6ACCD;">    # Caching dependencies to speed up workflows. (GitHub will remove any cache entries that have not been accessed in over 7 days.)</span></span>\n<span class="line"><span style="color:#A6ACCD;">    - name: Cache node modules</span></span>\n<span class="line"><span style="color:#A6ACCD;">      uses: actions/cache@v1</span></span>\n<span class="line"><span style="color:#A6ACCD;">      id: cache</span></span>\n<span class="line"><span style="color:#A6ACCD;">      with:</span></span>\n<span class="line"><span style="color:#A6ACCD;">        path: node_modules</span></span>\n<span class="line"><span style="color:#A6ACCD;">        key: ${{ runner.os }}-node-${{ hashFiles(&#39;**/package-lock.json&#39;) }}</span></span>\n<span class="line"><span style="color:#A6ACCD;">        restore-keys: |</span></span>\n<span class="line"><span style="color:#A6ACCD;">          ${{ runner.os }}-node-</span></span>\n<span class="line"><span style="color:#A6ACCD;">    - name: Install Dependencies</span></span>\n<span class="line"><span style="color:#A6ACCD;">      if: steps.cache.outputs.cache-hit != &#39;true&#39;</span></span>\n<span class="line"><span style="color:#A6ACCD;">      run: npm i</span></span>\n<span class="line"><span style="color:#A6ACCD;"></span></span>\n<span class="line"><span style="color:#A6ACCD;">    # Vuepress Build.</span></span>\n<span class="line"><span style="color:#A6ACCD;">    - name: Generates Pages</span></span>\n<span class="line"><span style="color:#A6ACCD;">      run: |</span></span>\n<span class="line"><span style="color:#A6ACCD;">        npm run build</span></span>\n<span class="line"><span style="color:#A6ACCD;"></span></span>\n<span class="line"><span style="color:#A6ACCD;">    - name: Deploy Github Pages🚀</span></span>\n<span class="line"><span style="color:#A6ACCD;">      uses: JamesIves/github-pages-deploy-action@4.1.0</span></span>\n<span class="line"><span style="color:#A6ACCD;">      with:</span></span>\n<span class="line"><span style="color:#A6ACCD;">        repository-name: idxiu/xxx # 操作应部署到的分支。.</span></span>\n<span class="line"><span style="color:#A6ACCD;">        branch: master</span></span>\n<span class="line"><span style="color:#A6ACCD;">        folder: ./src/.vuepress/dist # 操作应部署的文件夹.</span></span>\n<span class="line"><span style="color:#A6ACCD;">        ssh-key: ${{ secrets.DEPLOY_KEY }} # 部署密钥</span></span>\n<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>从 <code>A仓库</code> 部署到 <code>B仓库</code></p><ul><li><code>B仓库</code>添加<code>DEPLOY_KEY中的公钥 </code></li><li><code>A仓库</code>中添加<code>私钥 </code></li></ul></div>',4);const C=s(i,[["render",function(s,l,p,o,t,i){const C=c("VueJobs");return n(),a("div",null,[r,e(C),A])}]]);export{t as __pageData,C as default};
