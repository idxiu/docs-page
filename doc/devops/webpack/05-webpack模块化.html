<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模块化 | IDXIU</title>
    <meta name="description" content="IDXIU DOCS">
    <link rel="stylesheet" href="/docs-page/assets/style.c34f8a11.css">
    <link rel="modulepreload" href="/docs-page/assets/app.399c4537.js">
    <link rel="modulepreload" href="/docs-page/assets/doc_devops_webpack_05-webpack模块化.md.e74d7d37.lean.js">
    <link rel="prefetch" href="/docs-page/assets/chunks/VPAlgoliaSearchBox.b59d8f87.js">
    <link rel="icon" href="/docs-page/favicon.png">
  <script crossorigin="anonymous" async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7449487677378035"></script>
  <link rel="preload" href="/docs-page/assets/inter-latin.7b37fe23.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <meta name="theme-color" content="#3c8772">
  <script>(()=>{const e=(o,r,c=!1)=>{const s=localStorage.getItem(o);(s?s!=="false":c)&&document.documentElement.classList.add(r)};e("vue-docs-prefer-composition","prefer-composition"),e("vue-docs-prefer-sfc","prefer-sfc",!0),window.__VUE_BANNER_ID__="wip",e(`vue-docs-banner-${__VUE_BANNER_ID__}`,"banner-dismissed")})();</script>
  <link rel="icon" href="/docs-page/favicon.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="VPApp" data-v-290c2fe3><!--[--><span tabindex="-1" data-v-80a00f7c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-80a00f7c>Skip to content</a><!--]--><!----><!--[--><!--]--><header class="VPNav nav-bar" data-v-290c2fe3 data-v-6027f69c><div class="VPNavBar" data-v-6027f69c data-v-74ea9285><div class="container" data-v-74ea9285><a class="VPNavBarTitle" href="/" data-v-74ea9285 data-v-264bda7f><!--[--><img src="/docs-page/assets/logo.127502ee.svg" class="logo" alt="logo" data-v-264bda7f><!--]--></a><div class="content" data-v-74ea9285><div class="VPNavBarSearch search" data-v-74ea9285 style="--50cde7a5:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-74ea9285 data-v-df70e78f><span id="main-nav-aria-label" class="visually-hidden" data-v-df70e78f>主导航</span><!--[--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/docs-page/standard/dev/" data-v-df70e78f data-v-bbe2db89><!--[-->开发流程<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/docs-page/standard/env/" data-v-df70e78f data-v-bbe2db89><!--[-->环境搭建手册<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/docs-page/standard/cut-graph/" data-v-df70e78f data-v-bbe2db89><!--[-->切图规范<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/docs-page/standard/front-end/" data-v-df70e78f data-v-bbe2db89><!--[-->前端规范<!--]--><!----></a><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/docs-page/doc/pageui/" data-v-df70e78f data-v-bbe2db89><!--[-->pageUI<!--]--><!----></a><!--]--><!--[--><div class="vt-flyout VPNavBarMenuGroup" data-v-df70e78f data-v-2ef94396><button type="button" class="vt-flyout-button" aria-haspopup="true" aria-expanded="false"><span class="vt-flyout-button-text">vue3 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-flyout-button-text-icon"><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="vt-flyout-menu"><div class="vt-menu"><div class="vt-menu-items"><!--[--><!--[--><a class="vt-link link vt-menu-link" href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer"><!--[-->vue3文档<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer"><!--[-->Vue Router<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://pinia.vuejs.org/" target="_blank" rel="noopener noreferrer"><!--[-->pinia<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://cn.vuejs.org/guide/scaling-up/tooling.html" target="_blank" rel="noopener noreferrer"><!--[-->工具链<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://next.vuex.vuejs.org/" target="_blank" rel="noopener noreferrer"><!--[-->Vuex<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://cli.vuejs.org/" target="_blank" rel="noopener noreferrer"><!--[-->Vue CLI<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://next.vue-test-utils.vuejs.org/guide/" target="_blank" rel="noopener noreferrer"><!--[-->Vue Test Utils<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://devtools.vuejs.org" target="_blank" rel="noopener noreferrer"><!--[-->Devtools<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://news.vuejs.org/" target="_blank" rel="noopener noreferrer"><!--[-->Weekly news<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://blog.vuejs.org/" target="_blank" rel="noopener noreferrer"><!--[-->vue Blog<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="https://sfc.vuejs.org" target="_blank" rel="noopener noreferrer" data-v-df70e78f data-v-bbe2db89><!--[-->演练场<!--]--><!----></a><!--]--><!--[--><div class="vt-flyout VPNavBarMenuGroup" data-v-df70e78f data-v-2ef94396><button type="button" class="vt-flyout-button" aria-haspopup="true" aria-expanded="false"><span class="vt-flyout-button-text">基础强化 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-flyout-button-text-icon"><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="vt-flyout-menu"><div class="vt-menu"><div class="vt-menu-items"><!--[--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">环境搭建</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/basic/node/"><!--[-->Node.js<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/basic/debug/"><!--[-->调试技巧<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/basic/docker/"><!--[-->Docker<!--]--><!----></a><!--]--><!--]--></div><!--]--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">语言基础</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/basic/ts/"><!--[-->TypeScript<!--]--><!----></a><!--]--><!--]--></div><!--]--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">数据库</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/basic/nosql/"><!--[-->NoSQL<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/basic/mongo/"><!--[-->mongoDB<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/basic/redis/"><!--[-->Redis<!--]--><!----></a><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vt-flyout VPNavBarMenuGroup" data-v-df70e78f data-v-2ef94396><button type="button" class="vt-flyout-button" aria-haspopup="true" aria-expanded="false"><span class="vt-flyout-button-text">DevOps <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-flyout-button-text-icon"><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="vt-flyout-menu"><div class="vt-menu"><div class="vt-menu-items"><!--[--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">效率工具</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/devops/jenkins/"><!--[-->Jenkins<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/devops/webpack/"><!--[-->webpack<!--]--><!----></a><!--]--><!--]--></div><!--]--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">容器化</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/devops/docker-advance/"><!--[-->Docker进阶<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/doc/devops/k8s/"><!--[-->Kubernetes<!--]--><!----></a><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="vt-link link VPNavBarMenuLink" href="/docs-page/git/" data-v-df70e78f data-v-bbe2db89><!--[-->Git<!--]--><!----></a><!--]--><!--[--><div class="vt-flyout VPNavBarMenuGroup" data-v-df70e78f data-v-2ef94396><button type="button" class="vt-flyout-button" aria-haspopup="true" aria-expanded="false"><span class="vt-flyout-button-text">进阶 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-flyout-button-text-icon"><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="vt-flyout-menu"><div class="vt-menu"><div class="vt-menu-items"><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/advanced/regex/"><!--[-->正则表达式<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/advanced/algorithm/"><!--[-->算法<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/advanced/codePen/"><!--[-->代码块<!--]--><!----></a><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vt-flyout VPNavBarMenuGroup" data-v-df70e78f data-v-2ef94396><button type="button" class="vt-flyout-button" aria-haspopup="true" aria-expanded="false"><span class="vt-flyout-button-text">关于 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-flyout-button-text-icon"><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="vt-flyout-menu"><div class="vt-menu"><div class="vt-menu-items"><!--[--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">日志</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/about/update-logs/"><!--[-->更新日志<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="https://github.com/idxiu/docs-page" target="_blank" rel="noopener noreferrer"><!--[-->github源码<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="vt-link-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--]--></div><!--]--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">参与贡献</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/about/notes/"><!--[-->贡献指南<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/about/vuepress/"><!--[-->项目说明<!--]--><!----></a><!--]--><!--]--></div><!--]--><!--[--><div class="vt-menu-group"><p class="vt-menu-group-title">社交媒介</p><!--[--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/about/me/"><!--[-->介绍<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/links/友情连接.html"><!--[-->友情链接<!--]--><!----></a><!--]--><!--[--><a class="vt-link link vt-menu-link" href="/docs-page/links/留言版.html"><!--[-->留言版<!--]--><!----></a><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPNavBarAppearance appearance" data-v-74ea9285 data-v-bccb1f64><button class="vt-switch vt-switch-appearance" type="button" role="switch" aria-label="切换深色模式" data-v-bccb1f64><span class="vt-switch-check"><span class="vt-switch-icon"><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="vt-social-links VPNavBarSocialLinks social-links" data-v-74ea9285 data-v-e058de3a><!--[--><a class="vt-social-link is-small" href="https://github.com/idxiu/" title="github" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-social-link-icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden">github</span></a><!--]--></div><div class="vt-flyout VPNavBarExtra extra" data-v-74ea9285 data-v-44b09ca4><button type="button" class="vt-flyout-button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-flyout-button-icon"><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="vt-flyout-menu"><div class="vt-menu"><!----><!--[--><!--[--><div class="vt-menu-group" data-v-44b09ca4><div class="vt-menu-item item" data-v-44b09ca4><p class="vt-menu-label" data-v-44b09ca4>外观</p><div class="vt-menu-action action" data-v-44b09ca4><button class="vt-switch vt-switch-appearance" type="button" role="switch" aria-label="切换深色模式" data-v-44b09ca4><span class="vt-switch-check"><span class="vt-switch-icon"><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="vt-menu-group" data-v-44b09ca4><div class="vt-menu-item item" data-v-44b09ca4><div class="vt-social-links social-links" data-v-44b09ca4><!--[--><a class="vt-social-link is-small" href="https://github.com/idxiu/" title="github" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-social-link-icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden">github</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="vt-hamburger VPNavBarHamburger hamburger" aria-label="移动版导航" aria-expanded="false" aria-controls="VPNavScreen" data-v-74ea9285 data-v-dfa5e67d><span class="vt-hamburger-container"><span class="vt-hamburger-top"></span><span class="vt-hamburger-middle"></span><span class="vt-hamburger-bottom"></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-290c2fe3 data-v-de3aa7a6><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-de3aa7a6><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-de3aa7a6><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-de3aa7a6>菜单</span></button><a class="top-link" href="#" data-v-de3aa7a6>返回顶部</a></div><aside class="VPSidebar" data-v-290c2fe3 data-v-997684fe><nav id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-997684fe><!--[--><!--[--><!----><!--]--><!--]--><span id="sidebar-aria-label" class="visually-hidden" data-v-997684fe>侧边栏导航</span><!--[--><div class="group" data-v-997684fe><section class="VPSidebarGroup" data-v-997684fe data-v-62267dbd><div class="title" data-v-62267dbd><h2 class="title-text" data-v-62267dbd>webpack</h2></div><!--[--><a class="link" href="/docs-page/doc/devops/webpack/" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>简介</p></a><a class="link" href="/docs-page/doc/devops/webpack/01-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>核心概念</p></a><a class="link" href="/docs-page/doc/devops/webpack/02-%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>常见配置</p></a><a class="link" href="/docs-page/doc/devops/webpack/03-%E5%AE%8C%E6%95%B4%E9%85%8D%E7%BD%AE.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>完整配置</p></a><a class="link" href="/docs-page/doc/devops/webpack/04-ES6%E8%AF%AD%E6%B3%95%E6%94%AF%E6%8C%81.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>ES6语法支持</p></a><a class="link" href="/docs-page/doc/devops/webpack/05-webpack%E6%A8%A1%E5%9D%97%E5%8C%96.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>webpack模块化</p></a><a class="link" href="/docs-page/doc/devops/webpack/06-TS-JS%E5%A4%84%E7%90%86.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>TS&amp;JS处理</p></a><a class="link" href="/docs-page/doc/devops/webpack/07-CSS%E5%A4%84%E7%90%86.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>CSS处理</p></a><a class="link" href="/docs-page/doc/devops/webpack/08-HTML.html" data-v-62267dbd data-v-b681b077><p class="link-text" data-v-b681b077>HTML</p></a><!--]--></section></div><!--]--><!--[--><!--]--></nav></aside><div id="VPContent" class="VPContent has-sidebar" data-v-290c2fe3 data-v-2ce99b37><div class="VPContentDoc has-aside has-sidebar" data-v-2ce99b37 data-v-db4d725f><div class="container" data-v-db4d725f><div class="aside" data-v-db4d725f><div class="aside-container" data-v-db4d725f><!--[--><!--]--><div class="VPContentDocOutline" data-v-db4d725f data-v-7a02eaf7><div class="outline-marker" data-v-7a02eaf7></div><div class="outline-title" data-v-7a02eaf7>本页目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-7a02eaf7><span id="doc-outline-aria-label" class="visually-hidden" data-v-7a02eaf7>Table of Contents for current page</span><ul class="root" data-v-7a02eaf7><!--[--><li style="" data-v-7a02eaf7><a class="outline-link" href="#模块化规范" data-v-7a02eaf7>模块化规范</a><!----></li><li style="" data-v-7a02eaf7><a class="outline-link" href="#webpack工作原理简析" data-v-7a02eaf7>Webpack工作原理简析</a><!----></li><li style="" data-v-7a02eaf7><a class="outline-link" href="#webpack对module-的增强" data-v-7a02eaf7>webpack对Module 的增强</a><!----></li><li style="" data-v-7a02eaf7><a class="outline-link" href="#资源的模块化处理" data-v-7a02eaf7>资源的模块化处理</a><!----></li><!--]--></ul></nav></div><!--[--><!--]--><!----><!--[--><!--[--><!--[--><div class="wwads-container"><ins class="adsbygoogle" style="display:inline-block;width:200px;height:200px;" data-ad-client="ca-pub-7449487677378035" data-ad-slot="3297244731"></ins></div><!--]--><!--]--><!--]--></div></div><div class="content" data-v-db4d725f><!--[--><!--]--><main data-v-db4d725f><div style="position:relative;" class="vt-doc doc" data-v-db4d725f><div><h1 id="模块化" tabindex="-1">模块化 <a class="header-anchor" href="#模块化" aria-hidden="true">#</a></h1><div class="vuejobs-wrapper" data-v-f5415494><div class="vj-container" data-v-f5415494><!--[--><!--]--></div><div class="vj-link" data-v-f5415494> Jobs by <a href="https://vuejobs.com/?utm_source=vuejs&amp;utm_medium=referral&amp;utm_campaign=jobs_widget&amp;utm_content=bottom_link" target="_blank" title="Hire Vue.js developers" data-v-f5415494>vuejobs.com</a></div></div><h2 id="模块化规范" tabindex="-1">模块化规范 <a class="header-anchor" href="#模块化规范" aria-hidden="true">#</a></h2><p>三大 JavaScript 主流模块规范：CommonJS、AMD 和 ES6 Module。</p><h3 id="commonjs" tabindex="-1">CommonJS <a class="header-anchor" href="#commonjs" aria-hidden="true">#</a></h3><p><a href="https://nodejs.org/docs/latest/api/modules.html" target="_blank" rel="noreferrer">CommonJS </a>规范是 2009 年一名来自 Mozilla 团队的工程师 Kevin Dangoor 开始设计一个叫 ServerJS 的项目提出来的，随着 Node.js 的广泛应用，被广泛接受。通过 <strong>ServerJS</strong> 这个名字就可以知道，CommonJS 主要是服务端用的模块规范。</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// sayhi.js</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> hi </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sayHi</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hi</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sayHi</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// index.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> sayHi </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./sayhi.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">sayHi</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>上面的代码就是 CommonJS 语法，使用了<code>require</code>来导入一个模块，<code>module.exports</code>导出模块。在 Node.js 中<a href="https://nodejs.org/docs/latest/api/modules.html#modules_the_module_wrapper" target="_blank" rel="noreferrer">实际代码 </a>会被处理成下面代码而被应用：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exports</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">require</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">module</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">__filename</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">__dirname</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// 模块的代码在这里</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>CommonJS 的问题：<strong>Commonjs规范是不适合浏览器的，但由于有了打包工具的支撑，通过处理的Commonjs也可以在浏览器中使用。</strong></p><blockquote><p>CommonJS 规范是 JavaScript 中最常见的模块格式规范，这一标准的设计初衷是为了让 JavaScript 在多个环境下都实现模块化。</p><p>起先主要应用在 Node.js 服务端中，但是 Node.js 中的实现依赖了 Node.js 本身功能的实现，包括了 Node.js 的文件系统等，这个规范在浏览器环境是没法使用的。</p><p>后来随着 <a href="http://browserify.org/" target="_blank" rel="noreferrer">Browserify </a>和 Webpack 等打包工具的崛起，通过处理的 CommonJS 前端代码也可以在浏览器中使用。</p></blockquote><h3 id="amd" tabindex="-1">AMD <a class="header-anchor" href="#amd" aria-hidden="true">#</a></h3><p><a href="https://requirejs.org/docs/whyamd.html" target="_blank" rel="noreferrer">AMD 规范 </a>是在 CommonJS 规范之后推出的一个解决 web 页面动态异步加载 JavaScript 的规范，相对于 CommonJS 规范，它最大特点是浏览器内支持、实现简单、并且支持异步加载，AMD 规范最早是随着<a href="https://requirejs.org/docs/api.html" target="_blank" rel="noreferrer">RequireJS </a>发展而提出来的，它最核心的是两个方法：</p><ul><li><code>require()</code>：引入其他模块；</li><li><code>define()</code>：定义新的模块。</li></ul><p>基本语法如下：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// sayhi.js</span></span>
<span class="line"><span style="color:#82AAFF;">define</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hi</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">sayHi</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hi</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// index.js</span></span>
<span class="line"><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./sayhi.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sayHi</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">sayHi</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>AMD 提出来之后，也有很多变种的规范提出来，比如国内 <a href="https://seajs.github.io/seajs/" target="_blank" rel="noreferrer">Sea.js </a>的 <a href="https://github.com/cmdjs/specification/blob/master/draft/module.md" target="_blank" rel="noreferrer">CMD </a>，还有兼容 CommonJS 和 AMD 的 <a href="https://github.com/umdjs/umd" target="_blank" rel="noreferrer">UMD 规范 </a>（Universal Module Definition）。虽然 AMD 的模式很适合浏览器端的开发，但是随着 npm 包管理的机制越来越流行，这种方式可能会逐步的被淘汰掉。</p><p>AMD 规范的问题：<strong>依赖前置加大了开发的难度，无论在阅读代码还是编写代码的时，都会导致引入的模块内容是条件性执行的。</strong></p><blockquote><p>在 AMD 规范中，要声明一个模块，那么需要指定该模块用到的所有依赖项，这些依赖项会被当做形参传到 <code>factory</code>（<code>define</code>方法传入的函数叫做<code>factory</code>）中，对于依赖的模块会提前执行，这种做法叫做 <strong>依赖前置</strong> 。依赖前置加大了开发的难度，无论在阅读代码还是编写代码的时，都会导致引入的模块内容是条件性执行的。</p><p><strong>而且不管 AMD 还是 CommonJS 都没有统一浏览器和客户端的模块化规范。</strong></p></blockquote><h3 id="es6-module" tabindex="-1">ES6 Module <a class="header-anchor" href="#es6-module" aria-hidden="true">#</a></h3><p>ES6 Module，又称为 ES2015 modules，是 ES2015 标准提出来的一种模块加载方式，也是 ECMAScript 官方提出的方案，作为 ES 标准，不仅仅在 Web 现代浏览器（例如 Chrome）上面得到实现，而且在 Node.js 9+ 版本也得到原生支持（需要加上<code>--experimental-modules</code>使用）。</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// sayhi.js</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> hi </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sayHi</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hi</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// index.js</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> sayHi </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./sayhi</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">sayHi</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>对于前端项目，可以通过 Babel 或者 Typescript 进行提前体验。</p><blockquote><p>随着主流浏览器逐步开始支持 ES Modules（ESM） 标准，越来越多的目光投注于 Node.js 对于 ESM 的支持实现上。</p></blockquote><p>目前 Node.js 使用 CommonJS 作为官方的模块解决方案，虽然内置的模块方案促进了 Node.js 的流行，但是也为引入新的 ES Modules 造成了一定的阻碍。不过 Node.js 9.0+ 已经支持 ESM 语法，看示例：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// sayhi.mjs</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> hi </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sayHi</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hi</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// index.mjs</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> sayHi </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./sayhi.mjs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">sayHi</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 使用命令</span></span>
<span class="line"><span style="color:#A6ACCD;">➜ node </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">experimental</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">modules index</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mjs</span></span>
<span class="line"><span style="color:#A6ACCD;">hello world</span></span>
<span class="line"></span></code></pre></div><p>需要添加 flag <code>--experimental-modules</code> 来启动 ESM 语法支持，文件则必须使用 <code>.mjs</code> 后缀： <code>node --experimental-modules some-esm-file.mjs</code> 。</p><p><img src="https://b3logfile.com/file/2021/10/eabc8e4ede4b43ee8e577e9cab5649c4.png" alt="image-20210803114427025"></p><h2 id="webpack工作原理简析" tabindex="-1">Webpack工作原理简析 <a class="header-anchor" href="#webpack工作原理简析" aria-hidden="true">#</a></h2><p>在 Web 前端，不仅仅只有 JavaScript，还有 CSS、HTML、图片、字体、富媒体等众多资源，还有一些资源是以类似「方言」的方式存在着，比如 less、sass、各种 js 模板库等，这些资源并不能被直接用在 JavaScript 中，如果在 JavaScript 中像使用模块一样使用，那么可以极大的提高的开发体验：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> img </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./img/webpack.png</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> style </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./css/style.css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> template </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./template.ejs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>这时候，就需要 Webpack 了！<strong>在 Webpack 中，一切皆模块！</strong></p><p>webpack的编译逻辑：</p><ul><li>Webpack 会要对整个代码进行<strong>静态分析</strong> ，分析出各个模块的类型和它们依赖关系</li><li>将不同类型的模块提交给对应的加载器（loader）来处理。</li></ul><p>比如：一个用 Less 写的样式，可以先用 less-loader 将它转成一个 CSS 模块，然后再通过 css-loader 把他插入到页面的 <code>&lt;style&gt;</code> 标签中执行，甚至还可以通过插件将这部分 CSS 导出为 CSS 文件，使用<code>link</code>标签引入到页面中。</p><h2 id="webpack对module-的增强" tabindex="-1">webpack对Module 的增强 <a class="header-anchor" href="#webpack对module-的增强" aria-hidden="true">#</a></h2><p>在 Webpack 中，不仅可以为所欲为的使用 CommonJS 、AMD 和 ES6 Module 三大规范（比如一个文件中混合使用三种规范），还可以使用 Webpack 对 Module 的增强方法和属性。</p><h3 id="import-和神奇注释" tabindex="-1"><code>import()</code>和神奇注释 <a class="header-anchor" href="#import-和神奇注释" aria-hidden="true">#</a></h3><p>在 Webpack 中，<code>import</code>不仅仅是 ES6 Module 的模块导入方式，还是一个类似<code>require</code>的函数（其实这是 <a href="https://whatwg.github.io/loader/" target="_blank" rel="noreferrer">ES2015 loader 规范 </a>的实现），可以通过<code>import(&#39;path/to/module&#39;)</code>的方式引入一个模块，<code>import()</code>返回的是一个<code>Promise</code>对象：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">path/to/module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">mod</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">mod</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>参考<a href="/docs-page/doc/devops/webpack/04-ES6语法支持.html##webpack-中使用-babel">先前的一章</a>，来创建基础的ES6的webpack项目。</p></blockquote><p>下面看看使用<code>import()</code>和 import 的打包有什么区别：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// hello.js</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// lazy.js</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lazy module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// index.js</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> hello </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./lazy</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">lazy</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lazy</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>执行下命令：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">npx webpack </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">mode development：</span></span>
<span class="line"></span></code></pre></div><p><img src="https://b3logfile.com/file/2021/10/2752782e74dd49fdb1d72644bf66d58e.png" alt="image-20210804150238493"></p><p>通过打包后的 log 和<code>dist</code>文件夹内容发现，的代码被分割成了两个文件，一个是<code>main.js</code>一个是<code>lazy_js.js</code>，这是因为相对于<code>import from</code>的静态分析打包语法，<code>import()</code>是动态打包语法，即的内容不是第一时间打进<code>main.js</code>的，而是通过异步的方式加载进来的。<strong>代码分割是 webpack 进行代码结构组织，实现动态优化的一个重要功能</strong></p><blockquote><p>与<code>import()</code>用法一样的是<code>require.ensure</code>的方法，这个方法已经被<code>import()</code>方式替换掉；</p><p>针对<code>import()</code>打包产物跟普通的静态分析打包的实现不同之处，后面原理篇讲解打包产出物的时候会详细介绍。</p></blockquote><p>下面再来看下<code>import()</code>的<strong>神奇注释</strong> 特性，上面<code>index.js</code>的代码修改成下面这样，增加注释<code>webpackChunkName: &#39;lazy-name&#39;</code></p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> hello </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">import</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/*</span></span>
<span class="line"><span style="color:#676E95;">     webpackChunkName: &#39;toimc-lazy&#39;</span></span>
<span class="line"><span style="color:#676E95;">     */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./lazy</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">lazy</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lazy</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>则打包后的结果，<code>lasy_js.js</code>变成了<code>toimc-lazy.js</code>了，这个文件的名字就是在<code>import()</code>注释里面指定的<code>webpackChunkName</code>，这就是神奇注释（Magic Comments）。</p><p><img src="https://b3logfile.com/file/2021/10/085b8d6d7ca948a88c343e47af6f4cc3.png" alt="image-20210804150440531"></p><p>目前支持的注释有：</p><ul><li><code>webpackInclude</code>：如果是 import 的一个目录，则可以指定需要引入的文件特性，例如只加载 json 文件：<code>/\.json$/</code>；</li><li><code>webpackExclude</code>：如果是 import 的一个目录，则可以指定需要过滤的文件，例如 <code>/\.noimport\.json$/</code>；</li><li><code>webpackChunkName</code>：这是 chunk 文件的名称，例如 toimc-lazy；</li><li><code>webpackPrefetch</code>: 是否预取模块，及其优先级，可选值<code>true</code>、或者整数优先级别，0 相当于 true，webpack 4.6+支持；</li><li><code>webpackPreload</code>: 是否预加载模块，及其优先级，可选值<code>true</code>、或者整数优先级别，0 相当于 true，webpack 4.6+支持；</li><li><code>webpackMode</code>: 可选值<code>lazy</code>/<code>lazy-once</code>/<code>eager</code>/<code>weak</code>。</li></ul><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> hello </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(hello)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">import</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/* webpackChunkName: &#39;toimc-lazy&#39; */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/* webpackInclude: /\.json$/ */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/* webpackExclude: /\.noimport\.json$/ */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/* webpackMode: &quot;lazy&quot; */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/* webpackPrefetch: true */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">/* webpackPreload: true */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./lazy</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;">lazy</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lazy</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>这里最复杂的是<code>webpackMode</code>：</p><ul><li><code>lazy</code>：是默认的模式，为每个 <code>import()</code> 导入的模块，生成一个可延迟加载 chunk；</li><li><code>lazy-once</code>：生成一个可以满足所有 <code>import()</code> 调用的<strong>单个</strong> 可延迟加载 chunk，此 chunk 将在第一次 import() 调用时获取，随后的 import() 调用将使用相同的网络响应；注意，这种模式仅在部分动态语句中有意义，例如 import(<code>./locales/${language}.json</code>)，其中可能含有多个被请求的模块路径；</li><li><code>eager</code>：不会生成额外的 chunk，所有模块都被当前 chunk 引入，并且没有额外的网络请求。仍然会返回 Promise，但是是 resolved 状态。和静态导入相对比，在调用 <code>import()</code> 完成之前，该模块不会被执行。</li><li><code>weak</code>：尝试加载模块，如果该模块函数已经以其他方式加载（即，另一个 chunk 导入过此模块，或包含模块的脚本被加载）。仍然会返回 Promise，但是只有在客户端上已经有该 chunk 时才成功解析。如果该模块不可用，Promise 将会是 rejected 状态，并且网络请求永远不会执行。当需要的 chunks 始终在（嵌入在页面中的）初始请求中手动提供，而不是在应用程序导航在最初没有提供的模块导入的情况触发，这对于 Server 端渲染（SSR，Server-Side Render）是非常有用的。</li></ul><p>通过上面的神奇注释，<code>import()</code>不再是简单的 JavaScript 异步加载器，还是任意模块资源的加载器，举例说明：如果页面用到的图片都放在<code>src/assets/img</code>文件夹下，你们可以通过下面方式将用到的图片打包到一起：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#82AAFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#676E95;">/* webpackChunkName: &quot;image&quot;, webpackInclude: /\.(png|jpg|gif)/ */</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./assets/img</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>prefetch 优先级低于 preload，preload 会并行或者加载完主文件之后立即加载；prefetch 则会在主文件之后、空闲时在加载。prefetch 和 preload 可以用于提前加载图片、样式等资源的功能。</p></blockquote><h3 id="require-resolve-和require-resolveweak" tabindex="-1"><code>require.resolve()</code> 和<code>require.resolveWeak()</code> <a class="header-anchor" href="#require-resolve-和require-resolveweak" aria-hidden="true">#</a></h3><p><code>require.resolve()</code> 和 <code>require.resolveWeak()</code>都可以获取模块的唯一 ID（moduleId），区别在于<code>require.resolve()</code>会把模块真实引入进 bundle，而<code>require.resolveWeak()</code>则不会，配合<code>require.cache</code>和 <code>__webpack_modules__</code>可以用于判断模块是否加载成功或者是否可用。</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (__webpack_modules__[require</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolveWeak</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 当模块可用时，做一些事情...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (require</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cache[require</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolveWeak</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 当模块被加载之前，做一些事情...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 可以执行动态解析（&quot;context&quot;）</span></span>
<span class="line"><span style="color:#676E95;">// 与其他 require/import 方法类似。</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> page </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Foo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">__webpack_modules__[require</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolveWeak</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">./page/</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">page</span><span style="color:#89DDFF;">}`</span><span style="color:#A6ACCD;">)]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="require-context" tabindex="-1"><code>require.context()</code> <a class="header-anchor" href="#require-context" aria-hidden="true">#</a></h3><p><strong><code>require.context(directory, includeSubdirs, filter)</code>可以批量将<code>directory</code>内的文件全部引入进文件(这个在视频中有介绍到)</strong> ，并且返回一个具有<code>resolve</code>的 context 对象，使用<code>context.resolve(moduleId)</code>则返回对应的模块。</p><ul><li>directory：目录 string；</li><li>includeSubdirs：是否包含子目录，可选，默认值是 true；</li><li>filter：过滤正则规则，可选项。</li></ul><blockquote><p>Tips：注意 <code>require.context()</code> 会将所有的文件都引入进 bundle！</p></blockquote><h3 id="require-include" tabindex="-1"><code>require.include()</code> <a class="header-anchor" href="#require-include" aria-hidden="true">#</a></h3><blockquote><p><code>require.include()</code>已被废弃，不久将被删除。</p></blockquote><p><code>require.include(dependency)</code>顾名思义为引入某个依赖，但是并不执行它，可以用于优化 chunk，例如下面示例代码：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">require</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">include</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./hello.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">require</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ensure</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./hello.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./weak.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">require</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/* ... */</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">require</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ensure</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./hello.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./lazy.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">require</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;">/* ... */</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="资源的模块化处理" tabindex="-1">资源的模块化处理 <a class="header-anchor" href="#资源的模块化处理" aria-hidden="true">#</a></h2><p>Webpack 还对一些常用的 Node.js 模块和属性进行了 mock，例如：在 web 的 js 文件中可以直接引入 Node.js 的<code>querystring</code>模块，这个模块实际引入的是<a href="https://github.com/webpack/node-libs-browser" target="_blank" rel="noreferrer">node-libs-browser </a>来对 Node.js 核心库 polyfill，详细在 web 页面中可以用的 Node.js 模块，可以参考<a href="https://github.com/webpack/node-libs-browser" target="_blank" rel="noreferrer">node-libs-browser </a>Readme 文件的表格。</p><h3 id="import和import" tabindex="-1"><code>@import</code>和<code>import</code> <a class="header-anchor" href="#import和import" aria-hidden="true">#</a></h3><p>在 Webpack 中的 css （包括其预处理语言，例如 Less、Sass）等，都可以在内部通过<code>@import</code>语法直接引入使用：</p><div class="language-css"><button class="copy"></button><span class="lang">css</span><pre><code><span class="line"><span style="color:#89DDFF;">@import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vars.less</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">body</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> @bg-color</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>除了样式文件中的<code>@import</code>，在 JavaScript 文件中，还支持直接使用 ES6 Module 的<code>import</code>（包括 <code>require</code>）直接引入样式文件，例如：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> styles </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./style.css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>JavaScript 的这种语法其实是 <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noreferrer">CSS Modules 语法 </a>，目前浏览器支持程度有限，但是在 Webpack 中，可以通过配置 loader 优先使用这种方式！</p><blockquote><p>后面讲解 CSS 样式配置的时候会更加详细的讲解 CSS Modules</p></blockquote><h3 id="把资源作为模块引入" tabindex="-1">把资源作为模块引入 <a class="header-anchor" href="#把资源作为模块引入" aria-hidden="true">#</a></h3><p>在 Webpack 中，除了 CSS 可以直接使用<code>import</code>语法引入，类似 HTML 和页面模板等，可以直接使用对应的 loader ，通过下面的语法来引入：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> html </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">html-loader!./loader.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(html)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>上面的代码得到<code>html</code>变量实际为引入的<code>loader.html</code>的 string 片段。除了 html，类似模板文件，还可以直接转换为对应的 render 函数，例如下面代码使用了<a href="https://www.npmjs.com/package/ejs-loader" target="_blank" rel="noreferrer">ejs-loader </a>：</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> render </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ejs!./file.ejs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// =&gt; 得到 ejs 编译后的 render 函数</span></span>
<span class="line"><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;">(data)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 传入 data，直接返回的是 html 片段</span></span>
<span class="line"></span></code></pre></div><blockquote><p>原理篇将动手手写一个 <code>markdown-loader</code> ，更深入的了解其功能和原理实现。</p></blockquote><p>后续的一章，将会介绍webpack中重要的loaders处理，webpack借助loaders来处理各式各样的资源。</p></div></div><div class="edit-info" data-v-db4d725f><p class="edit-link" data-v-db4d725f><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor" class="vt-icon" data-v-db4d725f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><a class="vt-link link" href="https://github.com/idxiu/docs/edit/main/src/doc/devops/webpack/05-webpack模块化.md" target="_blank" rel="noopener noreferrer" data-v-db4d725f><!--[-->在 GitHub 上编辑此页<!--]--><!----></a></p><div class="last-updated" data-v-db4d725f><p class="VPLastUpdated" data-v-db4d725f data-v-f5a1a9a8>上次更新: <time datatime="2022-09-16T07:24:08.000Z" data-v-f5a1a9a8></time></p></div></div></main><!--[--><!--]--><footer class="VPContentDocFooter" data-v-db4d725f data-v-f00ff349><!----><a class="next-link" href="/docs-page/docs-page/doc/devops/webpack/" data-v-f00ff349><span class="desc" data-v-f00ff349>下一篇 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="vt-link-icon" data-v-f00ff349><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></span><span class="title" data-v-f00ff349>简介</span></a></footer></div></div></div></div><div class="visually-hidden" aria-live="polite" data-v-290c2fe3>模块化 has loaded</div></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about_me_index.md\":\"f5ddb3c2\",\"about_notes_01-编写规范.md\":\"7626b655\",\"about_notes_index.md\":\"6a652c17\",\"about_pull-request_01-pull request流程.md\":\"61216067\",\"about_pull-request_index.md\":\"d1ae88a7\",\"about_update-logs_index.md\":\"2de5197a\",\"about_vuepress_01-配置说明.md\":\"26eb0925\",\"about_vuepress_02-md编写规范.md\":\"3f2657fa\",\"about_vuepress_02.1-文档风格.md\":\"adf077c5\",\"about_vuepress_03-commit规范.md\":\"0f9d6b67\",\"about_vuepress_04-pr规范.md\":\"3cfb8a26\",\"about_vuepress_05-支持赞助.md\":\"e8ee3875\",\"about_vuepress_index.md\":\"84795916\",\"advanced_algorithm_01-找出数组重复次数最多的元素.md\":\"d17cab84\",\"advanced_algorithm_index.md\":\"093e95d1\",\"advanced_codepen_01-instanceof实现原理.md\":\"bbfbd137\",\"advanced_codepen_index.md\":\"aee8d1d2\",\"advanced_index.md\":\"48898016\",\"advanced_regex_01-基本匹配.md\":\"57ce96cd\",\"advanced_regex_02-元字符.md\":\"083c63e0\",\"advanced_regex_03-简写字符集.md\":\"264c4bf6\",\"advanced_regex_04-零宽度断言.md\":\"56cb5edb\",\"advanced_regex_05-标志.md\":\"d1c7efb7\",\"advanced_regex_06-贪婪匹配与惰性匹配.md\":\"2b9fa8f2\",\"advanced_regex_index.md\":\"e1883c27\",\"doc_basic_debug_index.md\":\"9422dcd7\",\"doc_basic_docker_index.md\":\"24112c07\",\"doc_basic_mongo_01-创建用户并分配权限.md\":\"85fe9747\",\"doc_basic_mongo_02-连接mongodb.md\":\"9e156fa7\",\"doc_basic_mongo_03-基础操作.md\":\"5c62b478\",\"doc_basic_mongo_04-高级查询.md\":\"283a1a35\",\"doc_basic_mongo_05-复制集.md\":\"3f64be07\",\"doc_basic_mongo_index.md\":\"61ff16f8\",\"doc_basic_node_01-koa.md\":\"1427bc3d\",\"doc_basic_node_02-webpack5构建.md\":\"0bbcf895\",\"doc_basic_node_03-项目规范及工具.md\":\"6c90e847\",\"doc_basic_node_index.md\":\"bf2293cb\",\"doc_basic_nosql_index.md\":\"d37d8759\",\"doc_basic_redis_index.md\":\"b023af0f\",\"doc_basic_ts_01-环境配置.md\":\"3a6199a2\",\"doc_basic_ts_02-基础语法.md\":\"5709f8e1\",\"doc_basic_ts_index.md\":\"7ab44d34\",\"doc_devops_docker-advance_index.md\":\"7ef885e9\",\"doc_devops_jenkins_index.md\":\"d5438371\",\"doc_devops_k8s_index.md\":\"4a3d9c58\",\"doc_devops_webpack_01-核心概念.md\":\"646c2124\",\"doc_devops_webpack_02-常见配置.md\":\"e921c9cb\",\"doc_devops_webpack_03-完整配置.md\":\"884ad705\",\"doc_devops_webpack_04-es6语法支持.md\":\"eb35ab7b\",\"doc_devops_webpack_05-webpack模块化.md\":\"e74d7d37\",\"doc_devops_webpack_06-ts-js处理.md\":\"12d4100d\",\"doc_devops_webpack_07-css处理.md\":\"eea17f06\",\"doc_devops_webpack_08-html.md\":\"1c5a2446\",\"doc_devops_webpack_index.md\":\"b759405c\",\"doc_nginx_readme.md\":\"fefed0aa\",\"doc_pageui_01-page-panel.md\":\"85b26bb0\",\"doc_pageui_02-page-refresh.md\":\"bbb951d2\",\"doc_pageui_03-page-loading.md\":\"1b2f3326\",\"doc_pageui_04-page-loadmore.md\":\"cc83fb66\",\"doc_pageui_05-page-tab-list.md\":\"8af74a99\",\"doc_pageui_06-page-empty.md\":\"1042ae9f\",\"doc_pageui_07-page-btn.md\":\"1e8b4c77\",\"doc_pageui_08-page-iphone-bottom.md\":\"1d36d0bf\",\"doc_pageui_09-page-mp-menu-spacing.md\":\"51285a26\",\"doc_pageui_10-page-check-tags.md\":\"611a335e\",\"doc_pageui_11-page-signboard.md\":\"7509ddc8\",\"doc_pageui_index.md\":\"188ffa4c\",\"git_01-git-install.md\":\"d8e63c0c\",\"git_02-ssh.md\":\"916fcaa7\",\"git_03-git规范.md\":\"c8ce0d1c\",\"git_04-命令行中使用git.md\":\"ecf6e3e1\",\"git_05-基础的命令行命令.md\":\"f432dc39\",\"git_06-git基础命令.md\":\"ca799c10\",\"git_07-windows下正确配置客户端以使用ssh协议.md\":\"3e7b77de\",\"git_08-自动化.md\":\"ecb21ef5\",\"git_index.md\":\"5d7d44eb\",\"index.md\":\"0defa575\",\"interview_readme.md\":\"af60f3f0\",\"interview_basic_readme.md\":\"0fd1cfc8\",\"interview_boss_readme.md\":\"8fa51573\",\"interview_company_readme.md\":\"321d0c13\",\"interview_hr_readme.md\":\"bb215dcc\",\"interview_industry_readme.md\":\"dbb4c23e\",\"interview_projects_readme.md\":\"c65ecd08\",\"interview_techs_readme.md\":\"2dad1913\",\"interview_templates_readme.md\":\"28cb0eca\",\"interview_types_readme.md\":\"d904616b\",\"interview_writor_readme.md\":\"7250b156\",\"links_友情连接.md\":\"511a9d6c\",\"links_留言版.md\":\"dedcfadb\",\"project_community-admin_readme.md\":\"a4c92da6\",\"project_community-electron_readme.md\":\"f3202e97\",\"project_community-flutter_readme.md\":\"e8cac1e3\",\"project_community-miniapp_1-搭建开发环境.md\":\"210d7a53\",\"project_community-miniapp_readme.md\":\"adc2c32a\",\"project_community-pc_readme.md\":\"91d8ab43\",\"project_community-webapp_readme.md\":\"18ce71dc\",\"project_react_readme.md\":\"38cf1df6\",\"search_readme.md\":\"d7fb3f4d\",\"standard_cut-graph_index.md\":\"176bd028\",\"standard_dev_index.md\":\"c63e1cf3\",\"standard_env_index.md\":\"a4c6e70c\",\"standard_front-end_01-框架设计.md\":\"92cea514\",\"standard_front-end_02-命名规范.md\":\"a9d7362b\",\"standard_front-end_02.1-vue规范.md\":\"f49796c9\",\"standard_front-end_03-注释规范.md\":\"79fbf607\",\"standard_front-end_04-结构层（html）规范.md\":\"5f328609\",\"standard_front-end_05-表示层（css）规范.md\":\"8e7be301\",\"standard_front-end_06-行为层（js）规范.md\":\"6c4c88b4\",\"standard_front-end_07-图片规范.md\":\"3bacca3d\",\"standard_front-end_08-小程序规范.md\":\"19014bfb\",\"standard_front-end_08.1-uniapp规范.md\":\"0a509401\",\"standard_front-end_09-app规范.md\":\"64fe3277\",\"standard_front-end_10-es6规范.md\":\"906d1a77\",\"standard_front-end_11-评审参考.md\":\"d00c17ba\",\"standard_front-end_12-附录.md\":\"1961c658\",\"standard_front-end_index.md\":\"b3f23da4\",\"standard_index.md\":\"3fb24e01\",\"standard_md_01-编写规范.md\":\"125ce3c7\",\"standard_md_readme.md\":\"57059e63\"}")</script>
    <script type="module" async src="/docs-page/assets/app.399c4537.js"></script>
    
  </body>
</html>